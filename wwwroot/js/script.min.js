"use trict";function disabledEvent(){}function plusDivs(n){showDivs(slideIndex+=n)}function currentDiv(n){showDivs(slideIndex=n)}function showDivs(n){var t,i=document.getElementsByClassName("slide-item"),r=document.getElementsByClassName("slide-badge");for(n>i.length&&(slideIndex=1),n<1&&(slideIndex=i.length),t=0;t<i.length;t++)i[t].classList.add("display-none");for(t=0;t<r.length;t++)r[t].className=r[t].className.replace(" slide-badge-active","");i[slideIndex-1].classList.remove("display-none");r[slideIndex-1].className+=" slide-badge-active"}function setCookie(n,t,i){var u="",r;i&&(r=new Date,r.setTime(r.getTime()+18e5),u="; expires="+r.toUTCString());document.cookie=n+"="+(t||"")+u+";"}function getCookie(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1,t.length);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return null}function eraseCookie(n){document.cookie=n+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}function remove_cookie(){eraseCookie("USER");eraseCookie("KEY");eraseCookie("IV")}function sign_out(){remove_cookie();window.location.href="/"}function update_token(n){setCookie("USER",n.value,.021);setCookie("KEY",n.key,.021);setCookie("IV",n.iv,.021)}function createCustomAlert(n){(d=document,d.getElementById("modalContainer"))||(mObj=d.getElementsByTagName("body")[0].appendChild(d.createElement("div")),mObj.id="modalContainer",mObj.style.height=d.documentElement.scrollHeight+"px",alertObj=mObj.appendChild(d.createElement("div")),alertObj.id="alertBox",d.all&&!window.opera&&(alertObj.style.top=document.documentElement.scrollTop+"px"),alertObj.style.left=(d.documentElement.scrollWidth-alertObj.offsetWidth)/2+"px",alertObj.style.visiblity="visible",h1=alertObj.appendChild(d.createElement("h1")),h1.appendChild(d.createTextNode(ALERT_TITLE)),msg=alertObj.appendChild(d.createElement("p")),msg.innerHTML=n,btn=alertObj.appendChild(d.createElement("a")),btn.id="closeBtn",btn.appendChild(d.createTextNode(ALERT_BUTTON_TEXT)),btn.focus(),btn.onclick=function(){return removeCustomAlert(),!1},alertObj.style.display="block")}function removeCustomAlert(){document.getElementsByTagName("body")[0].removeChild(document.getElementById("modalContainer"))}function Captcha(){for(var n=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"],i,t=0;t<6;t++)var r=n[Math.floor(Math.random()*n.length)],u=n[Math.floor(Math.random()*n.length)],f=n[Math.floor(Math.random()*n.length)],e=n[Math.floor(Math.random()*n.length)],o=n[Math.floor(Math.random()*n.length)],s=n[Math.floor(Math.random()*n.length)],h=n[Math.floor(Math.random()*n.length)];i=r+" "+u+"  "+f+" "+e+" "+o+" "+s+" "+h;document.getElementById("mainCaptcha").innerHTML=i;document.getElementById("mainCaptcha").value=i}function ValidCaptcha(){var n=removeSpaces(document.getElementById("mainCaptcha").value),t=removeSpaces(document.getElementById("txtInput").value);return n==t?!0:!1}function removeSpaces(n){return n.split(" ").join("")}function validation_phone(n){return n.match(/(84|0[3|5|7|8|9])+([0-9]{8})\b/g)?!0:!1}var connection=(new signalR.HubConnectionBuilder).withUrl("/KenoHub").build(),connectionAccount=(new signalR.HubConnectionBuilder).withUrl("/AccountHub").build(),connectionPot=(new signalR.HubConnectionBuilder).withUrl("/PotHub").build(),connectionNews=(new signalR.HubConnectionBuilder).withUrl("/NewsHub").build(),ALERT_TITLE="Thông Báo",ALERT_BUTTON_TEXT="OK",slideIndex=1,global_token,app;document.addEventListener("contextmenu",function(n){n.preventDefault()},!1);document.addEventListener("keydown",function(n){n.ctrlKey&&n.shiftKey&&n.keyCode==67&&disabledEvent(n);n.ctrlKey&&n.shiftKey&&n.keyCode==73&&disabledEvent(n);n.ctrlKey&&n.shiftKey&&n.keyCode==74&&disabledEvent(n);n.keyCode==83&&(navigator.platform.match("Mac")?n.metaKey:n.ctrlKey)&&disabledEvent(n);n.ctrlKey&&n.keyCode==85&&disabledEvent(n);event.keyCode==123&&disabledEvent(n)},!1);setInterval(function(){plusDivs(1)},5e3);global_token={value:getCookie("USER"),key:getCookie("KEY"),iv:getCookie("IV")};document.getElementById&&(window.alert=function(n){createCustomAlert(n)});$(function(){$(".lazy").Lazy({scrollDirection:"vertical",effect:"fadeIn",visibleOnly:!0,onError:function(n){console.log("error loading "+n.data("src"))}})});app=angular.module("STU",[]).run();app.controller("HomeController",["$scope","$timeout","$http",function(){showDivs(slideIndex)}]);app.controller("AccountController",["$scope","$timeout","$http",function(n){n.SendNotification=()=>{connectionAccount.invoke("SendNotification",n.NotificationTextSend).catch(function(n){return console.error(n.toString())})};n.goLogin=()=>{var t=n.Username,i=n.Password;connectionAccount.invoke("Login",t,i).catch(function(n){return console.error(n.toString())})};n.goRegister=()=>{var i=!0,t="",f=n.RGFullname,e=n.RGUsername,r=n.RGPhone,u=n.RGPassword,o=n.RGRePassword;if(!f||!e||!r||!u||!o){i=!1;t+="- Vui lòng điền đầy đủ thông tin.";alert(t);return}if(!validation_phone(r)){i=!1;t+="- Định dạng sđt không đúng.";alert(t);return}if(u!=o){i=!1;t+="- Xác nhận mật khẩu sai.";alert(t);return}if(!i){alert(t);return}connectionAccount.invoke("Register",f,r,e,u).catch(function(n){return console.error(n.toString())})}}]);app.controller("MenuController",["$scope","$timeout","$http",function(n){n.CloseMenu=()=>{var n=document.getElementsByClassName("menu-body");n[0].style.width="0px";n[0].style.left="-100%";setTimeout(function(){var n=document.getElementsByClassName("menu-overload");n[0].setAttribute("hidden","hidden")},500)};n.goAccount=()=>{window.location.href="/dang-nhap"};n.LoadMenu=()=>{var n=document.getElementsByClassName("menu-overload");n[0].removeAttribute("hidden");setTimeout(function(){var n=document.getElementsByClassName("menu-body");n[0].style.width="270px";n[0].style.left="0px"},100)};connectionAccount.on("ReceiveNotification",function(t){n.Notification=!0;n.NotificationText=t.message;var i=document.getElementById("marquee");i.start();setTimeout(function(){n.Notification=!1;n.$apply()},3e4);n.$apply()})}]);app.controller("HeaderController",["$scope","$timeout","$http",function(n,t,i){function r(){i.get("/topbar").then(function(t){var i=t.data.data.data;i.status&&(n.TopBar=i.data[0])})}n.LoginModal=!1;n.RegisterModal=!1;n.Notification=!1;r();connectionAccount.q=="Disconnected"&&connectionAccount.start().then(function(){}).catch(function(n){return console.error(n.toString())});n.LoadMenu=()=>{var n=document.getElementsByClassName("menu-overload");n[0].removeAttribute("hidden");setTimeout(function(){var n=document.getElementsByClassName("menu-body");n[0].style.width="270px";n[0].style.left="0px"},100)};n.Login=()=>{n.LoginModal=!0,n.RegisterModal=!1};n.CloseLogin=()=>{n.LoginModal=!1};n.goLogin=()=>{var t=n.Username,i=n.Password;connectionAccount.invoke("Login",t,i).catch(function(n){return console.error(n.toString())})};n.Register=()=>{n.RegisterModal=!0,n.LoginModal=!1};n.CloseRegister=()=>{n.RegisterModal=!1};n.goRegister=()=>{var i=!0,t="",f=n.RGFullname,e=n.RGUsername,r=n.RGPhone,u=n.RGPassword,o=n.RGRePassword;if(!f||!e||!r||!u||!o){i=!1;t+="- Vui lòng điền đầy đủ thông tin.";alert(t);return}if(!validation_phone(r)){i=!1;t+="- Định dạng sđt không đúng.";alert(t);return}if(u!=o){i=!1;t+="- Xác nhận mật khẩu sai.";alert(t);return}if(!i){alert(t);return}connectionAccount.invoke("Register",f,r,e,u).catch(function(n){return console.error(n.toString())})};n.goKeno=()=>{connectionAccount.invoke("LoginStatus",global_token,"/doan-so-chan-le").catch(function(n){return console.error(n.toString())})};n.goNohu=()=>{connectionAccount.invoke("LoginStatus",global_token,"/no-hu").catch(function(n){return console.error(n.toString())})};connectionAccount.on("ReceiveAccount",function(n,t){if(n.code==200){update_token(t);window.location.href="/";return}alert("tài khoản hoặc mật khẩu không đúng.")});connectionAccount.on("CheckLoginStatus",function(t,i,r){if(t.code==200){update_token(i);window.location.href=r;return}t.code==201?(remove_cookie(),window.location.href="/"):(remove_cookie(),n.LoginModal=!0,n.RegisterModal=!1,n.$apply())});connectionAccount.on("ReceiveRegister",function(n,t){if(n.code==200){update_token(t);window.location.href="/";return}alert(n.message)})}]);app.controller("PotController",["$scope","$timeout","$http",function(n){function u(){for(var u,t=0;t<e.length;t++)e[t].classList.remove("active"),e[t].classList.remove("active-result");if(f!=-1&&r==f){var h=document.getElementsByClassName("roll-"+r),l=document.getElementById("user_coin"),a=document.getElementById("user_coin_mobile"),v=document.getElementById("rra"+c);l.innerHTML="Xu hiện có: "+o;a.innerHTML="Xu hiện có: "+o;v.classList.add("roll-reward-active");h[0].classList.add("active-result");n.pot_loading=!1;n.$apply();clearInterval(i);let t=document.getElementById("roll-history"),u=document.getElementById("roll-history-mobile"),f=document.createElement("li");f.textContent="→ Nhận Được "+s+" Xu";f.classList.add("roll-history-win");let e=document.createElement("li");e.textContent="→ Nhận Được "+s+" Xu";e.classList.add("roll-history-win");t.append(f);u.append(e);t.scrollTop=t.scrollHeight;u.scrollTop=u.scrollHeight}u=document.getElementsByClassName("roll-"+r);u[0].classList.add("active");r++;r==20&&(r=0)}var e=document.getElementsByClassName("roll-body"),r=0,f=0,o=0,s=0,i=0,c=0,h=0,t={coe_1:.5,coe_2:1.5,coe_3:5,coe_4:17.5,coe_5:60,coe_6:200,coe_7:500};n.win_coin={coin_2:{star_1:2*t.coe_1,star_2:2*t.coe_2,star_3:2*t.coe_3,star_4:2*t.coe_4,star_5:2*t.coe_5,star_6:2*t.coe_6,star_7:2*t.coe_7},coin_10:{star_1:10*t.coe_1,star_2:10*t.coe_2,star_3:10*t.coe_3,star_4:10*t.coe_4,star_5:10*t.coe_5,star_6:10*t.coe_6,star_7:10*t.coe_7},coin_50:{star_1:50*t.coe_1,star_2:50*t.coe_2,star_3:50*t.coe_3,star_4:50*t.coe_4,star_5:50*t.coe_5,star_6:50*t.coe_6,star_7:50*t.coe_7},coin_100:{star_1:100*t.coe_1,star_2:100*t.coe_2,star_3:100*t.coe_3,star_4:100*t.coe_4,star_5:100*t.coe_5,star_6:100*t.coe_6,star_7:100*t.coe_7}};n.current_coin_coefficient=n.win_coin.coin_2;n.pot_loading=!1;n.pot_bet_coin=2;n.is_auto_roll=!1;connectionPot.q=="Disconnected"&&connectionPot.start().then(function(){}).catch(function(n){return console.error(n.toString())});n.goQuay=()=>{var i,t;if(n.pot_loading==!1){for(i=document.getElementsByClassName("rra"),t=0;t<i.length;t++)i[t].classList.remove("roll-reward-active");n.pot_loading=!0;connectionPot.invoke("PotRoll",global_token,n.pot_bet_coin).catch(function(n){return console.error(n.toString())})}};n.Set_Bet=t=>{var i,e,o;if(n.pot_loading==!1){var r=document.getElementsByClassName("roll-center-bet"),u=document.getElementsByClassName("rcb-mobile"),f=document.getElementsByClassName("rra");for(i=0;i<f.length;i++)f[i].classList.remove("roll-reward-active");for(i=0;i<r.length;i++)r[i].classList.remove("roll-center-bet-active");for(i=0;i<u.length;i++)u[i].classList.remove("roll-center-bet-active");e=document.getElementsByClassName("rcb-"+t);e[0].classList.add("roll-center-bet-active");o=document.getElementsByClassName("rcb-mobile-"+t);o[0].classList.add("roll-center-bet-active");n.pot_bet_coin=t;t==2?n.current_coin_coefficient=n.win_coin.coin_2:t==10?n.current_coin_coefficient=n.win_coin.coin_10:t==50?n.current_coin_coefficient=n.win_coin.coin_50:t==100&&(n.current_coin_coefficient=n.win_coin.coin_100)}};n.goAuto=()=>{n.is_auto_roll=!0,h=setInterval(function(){n.goQuay()},1e3)};n.goStop=()=>{n.is_auto_roll=!1,clearInterval(h)};connectionPot.on("ReceiveRollPot",function(t,e,l,a,v){if(t==null){remove_cookie();window.location.reload();return}if(e==-1){update_token(t);clearInterval(h);n.pot_loading=!1;n.is_auto_roll=!1;n.$apply();alert("Không đủ <b>Xu<\/b> để quay.");return}let y=document.getElementById("roll-history"),p=document.getElementById("roll-history-mobile"),w=document.createElement("li");w.textContent="Đặt Cược "+n.pot_bet_coin+" Xu";w.classList.add("roll-history-bet");let b=document.createElement("li");b.textContent="Đặt Cược "+n.pot_bet_coin+" Xu";b.classList.add("roll-history-bet");p.append(b);y.append(w);y.scrollTop=y.scrollHeight;p.scrollTop=p.scrollHeight;update_token(t);f=-1;r=0;i=setInterval(u,50);setTimeout(function(){clearInterval(i);i=setInterval(u,130)},2e3);setTimeout(function(){clearInterval(i);i=setInterval(u,160)},3e3);setTimeout(function(){clearInterval(i);i=setInterval(u,190)},4e3);setTimeout(function(){f=e;o=l;c=a;s=v;clearInterval(i);i=setInterval(u,210)},5e3)})}]);app.controller("NewsController",["$scope","$timeout","$http",function(n){connectionNews.q=="Disconnected"&&connectionNews.start().then(function(){}).catch(function(n){return console.error(n.toString())});n.upsert=!1;n.mainform=!0;n.NewsObject={id:0,name:"",image:"",isactived:!1,is_show_home:!1,html:""};n.AddNews=()=>{$("#editorDetail").data("kendoEditor").value(""),n.NewsObject={id:0,name:"",image:"",isactived:!1,is_show_home:!1,html:""},n.upsert=!0,n.mainform=!1};n.SaveNews=()=>{n.NewsObject.html=$("#editorDetail").data("kendoEditor").value(),connectionNews.invoke("AddNews",global_token,n.NewsObject).catch(function(n){return console.error(n.toString())})};n.Back=()=>{n.Find(),n.upsert=!1,n.mainform=!0};n.Find=()=>{connectionNews.invoke("ListNews",global_token,1).catch(function(n){return console.error(n.toString())})};n.EditNews=t=>{$("#editorDetail").data("kendoEditor").value(t.html),n.NewsObject=t,n.upsert=!0,n.mainform=!1};connectionNews.on("ReceiveAddNews",function(t,i){if(t.code!=200){alert(t.message);return}update_token(i);alert("Lưu Thành Công");n.Back();n.$apply()});connectionNews.on("ReceiveListNews",function(t,i){if(t.code!=200){alert(t.message);return}n.listnews=t.data;update_token(i);n.$apply()});$("#editorDetail").kendoEditor({resizable:{content:!0},tools:["bold","italic","underline","strikethrough","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","indent","outdent","createLink","unlink","insertImage","insertFile","subscript","superscript","tableWizard","createTable","addRowAbove","addRowBelow","addColumnLeft","addColumnRight","deleteRow","deleteColumn","viewHtml","formatting","cleanFormatting","fontName","fontSize","foreColor","backColor","print"],imageBrowser:{transport:{read:{url:"/get-director"},type:"imagebrowser-aspnetmvc",thumbnailUrl:"/get-image",uploadUrl:"/upload-file",destroy:{url:"/delete"},create:{url:"/create-folder"},imageUrl:"http://147.182.228.10/image/{0}"}}})}]);app.controller("KenoController",["$scope","$timeout","$http",function(n){n.PlayNowModal=!1;n.KenoModal=!1;n.ChanLeModal=!1;n.loading=!0;n.selectChanLe=0;n.text="QUAY SỐ BẮT ĐẦU SAU";connection.q=="Disconnected"&&connection.start().then(function(){connection.invoke("GetKeno",global_token).catch(function(n){return console.error(n.toString())})}).catch(function(n){return console.error(n.toString())});var t=()=>{for(var t=document.getElementsByClassName("chanle-select-span"),n=0;n<t.length;n++)t[n].classList.remove("modal-chanle-active")};n.ChanLeSelected=i=>{var r;t();i==1?(r=document.getElementsByClassName("modal-chanle-le"),r[0].classList.add("modal-chanle-active")):(r=document.getElementsByClassName("modal-chanle-chan"),r[0].classList.add("modal-chanle-active"));n.selectChanLe=i};n.PlayNow=()=>{n.PlayNowModal=!0};n.ClosePlayNow=()=>{n.PlayNowModal=!1};n.goBetNumber=()=>{n.PlayNowModal=!1,n.KenoModal=!0};n.goBetChanLe=()=>{n.PlayNowModal=!1,n.ChanLeModal=!0};n.CloseKeno=()=>{n.KenoModal=!1};n.CloseChanLe=()=>{n.ChanLeModal=!1};n.goAcceptKeno=()=>{var i=n.Keno_number,t=n.Keno_Coin;if(i==undefined||i==null){alert("Vui lòng chọn số muốn cược.");return}if(t==undefined||t==null){alert("Vui lòng chọn số <b>Xu<\/b> muốn cược.");return}if(t==0){alert("Vui lòng đặt <b>Xu<\/b> lớn hơn 0.");return}connection.invoke("KenoBet",global_token,n.KenoCurrent.id,i,t).catch(function(n){return console.error(n.toString())})};n.goAcceptChanLe=()=>{var i=n.selectChanLe,t=n.ChanLe_Coin;if(i==0){alert("Vui lòng chọn chẵn hoặc lẻ.");return}if(t==undefined||t==null){alert("Vui lòng chọn số <b>Xu<\/b> muốn cược.");return}if(t==0){alert("Vui lòng đặt <b>Xu<\/b> lớn hơn 0.");return}connection.invoke("ChanLeBet",global_token,n.ChanLeCurrent.id,i,t).catch(function(n){return console.error(n.toString())})};connection.on("ReceiveKeno",function(t,i,r,u,f){var o;if(t==null){remove_cookie();window.location.reload();return}update_token(t);n.KenoCurrent=i.data[0];n.KenoLast=i.data[1];n.ChanLeCurrent=r.data[0];n.ChanLeLast=r.data[1];n.datauser=i.data[1].users;n.datauserchanle=r.data[1].users;n.historyKeno=u;n.historyChanLe=f;n.text="VÒNG ĐẶT CƯỢC";i.data[0].result!=-1&&i.data[0].updatedusercoins&&(n.text="VÒNG KẾT QUẢ");i.data[0].result==-1||i.data[0].updatedusercoins||(i.data[0].result="??");var e=i.data[0].countdown,s=new Date,h=new Date(s.getTime()+e*1e3);n.minus=(e-e%60)/60;n.seconds=e%60;o=setInterval(function(){n.seconds=n.seconds-1;var t=Math.round((h.getTime()-(new Date).getTime())/1e3),r=n.minus*60+n.seconds;if(t!=r){window.location.reload();return}if(n.minus==0&&n.seconds==-1){clearInterval(o);e=0;connection.invoke("GetKeno",global_token).catch(function(n){return console.error(n.toString())});return}n.seconds==-1&&(n.seconds=59,n.minus=n.minus-1);n.minus!=0||i.data[0].updatedusercoins||(n.text="ĐỢI KẾT QUẢ");n.$apply()},1e3);n.loading=!1});connection.on("ReceiveKenoBet",function(n,t){if(alert(t.message),t.code==201){sign_out();return}update_token(n);t.code==200&&setTimeout(function(){window.location.reload()},2e3)});connection.on("ReceiveChanLeBet",function(n,t){if(alert(t.message),t.code==201){sign_out();return}update_token(n);t.code==200&&setTimeout(function(){window.location.reload()},2e3)})}]);